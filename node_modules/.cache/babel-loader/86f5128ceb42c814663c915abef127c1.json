{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createUseAuth = void 0;\n\nvar react_1 = require(\"react\");\n\nexports.createUseAuth = function (_a) {\n  var getSessionState = _a.getSessionState,\n      onHydratation = _a.onHydratation,\n      listenersContainer = _a.listenersContainer;\n  return function () {\n    var _a = react_1.useState(null),\n        session = _a[0],\n        setSession = _a[1];\n\n    var updateIsLoggedIn = function () {\n      var actualSession = getSessionState();\n\n      if (onHydratation) {\n        onHydratation(actualSession);\n      }\n\n      setSession(actualSession);\n    };\n\n    react_1.useEffect(function () {\n      updateIsLoggedIn();\n    }, []);\n    var listener = react_1.useCallback(function () {\n      updateIsLoggedIn();\n    }, []);\n    react_1.useEffect(function () {\n      listenersContainer.subscribe(listener);\n      return function () {\n        listenersContainer.unsubscribe(listener);\n      };\n    }, [listener]);\n    return [isLoggedIn(session), session];\n  };\n};\n\nvar isLoggedIn = function (session) {\n  return !!session;\n};","map":{"version":3,"sources":["/Users/markgray/projects/todoodleoo/node_modules/react-token-auth/lib/useAuth.js"],"names":["Object","defineProperty","exports","value","createUseAuth","react_1","require","_a","getSessionState","onHydratation","listenersContainer","useState","session","setSession","updateIsLoggedIn","actualSession","useEffect","listener","useCallback","subscribe","unsubscribe","isLoggedIn"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,aAAR,GAAwB,KAAK,CAA7B;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACAJ,OAAO,CAACE,aAAR,GAAwB,UAAUG,EAAV,EAAc;AAClC,MAAIC,eAAe,GAAGD,EAAE,CAACC,eAAzB;AAAA,MAA0CC,aAAa,GAAGF,EAAE,CAACE,aAA7D;AAAA,MAA4EC,kBAAkB,GAAGH,EAAE,CAACG,kBAApG;AACA,SAAO,YAAY;AACf,QAAIH,EAAE,GAAGF,OAAO,CAACM,QAAR,CAAiB,IAAjB,CAAT;AAAA,QAAiCC,OAAO,GAAGL,EAAE,CAAC,CAAD,CAA7C;AAAA,QAAkDM,UAAU,GAAGN,EAAE,CAAC,CAAD,CAAjE;;AACA,QAAIO,gBAAgB,GAAG,YAAY;AAC/B,UAAIC,aAAa,GAAGP,eAAe,EAAnC;;AACA,UAAIC,aAAJ,EAAmB;AACfA,QAAAA,aAAa,CAACM,aAAD,CAAb;AACH;;AACDF,MAAAA,UAAU,CAACE,aAAD,CAAV;AACH,KAND;;AAOAV,IAAAA,OAAO,CAACW,SAAR,CAAkB,YAAY;AAC1BF,MAAAA,gBAAgB;AACnB,KAFD,EAEG,EAFH;AAGA,QAAIG,QAAQ,GAAGZ,OAAO,CAACa,WAAR,CAAoB,YAAY;AAC3CJ,MAAAA,gBAAgB;AACnB,KAFc,EAEZ,EAFY,CAAf;AAGAT,IAAAA,OAAO,CAACW,SAAR,CAAkB,YAAY;AAC1BN,MAAAA,kBAAkB,CAACS,SAAnB,CAA6BF,QAA7B;AACA,aAAO,YAAY;AACfP,QAAAA,kBAAkB,CAACU,WAAnB,CAA+BH,QAA/B;AACH,OAFD;AAGH,KALD,EAKG,CAACA,QAAD,CALH;AAMA,WAAO,CAACI,UAAU,CAACT,OAAD,CAAX,EAAsBA,OAAtB,CAAP;AACH,GAtBD;AAuBH,CAzBD;;AA0BA,IAAIS,UAAU,GAAG,UAAUT,OAAV,EAAmB;AAAE,SAAO,CAAC,CAACA,OAAT;AAAmB,CAAzD","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createUseAuth = void 0;\nvar react_1 = require(\"react\");\nexports.createUseAuth = function (_a) {\n    var getSessionState = _a.getSessionState, onHydratation = _a.onHydratation, listenersContainer = _a.listenersContainer;\n    return function () {\n        var _a = react_1.useState(null), session = _a[0], setSession = _a[1];\n        var updateIsLoggedIn = function () {\n            var actualSession = getSessionState();\n            if (onHydratation) {\n                onHydratation(actualSession);\n            }\n            setSession(actualSession);\n        };\n        react_1.useEffect(function () {\n            updateIsLoggedIn();\n        }, []);\n        var listener = react_1.useCallback(function () {\n            updateIsLoggedIn();\n        }, []);\n        react_1.useEffect(function () {\n            listenersContainer.subscribe(listener);\n            return function () {\n                listenersContainer.unsubscribe(listener);\n            };\n        }, [listener]);\n        return [isLoggedIn(session), session];\n    };\n};\nvar isLoggedIn = function (session) { return !!session; };\n"]},"metadata":{},"sourceType":"script"}